var Particle=function (a,b,c){this.init(a,b,c)}Particle.prototype={init:function(a,b,c){this.alive=!0;this.radius=c||10;this.wander=0.15;this.theta=random(TWO_PI);this.drag=0.92;this.color="#fff";this.x=a||0;this.y=b||0;this.vy=this.vx=0},move:function(){this.x+=this.vx;this.y+=this.vy;this.vx*=this.drag;this.vy*=this.drag;this.theta+=random(-0.5,0.5)*this.wander;this.vx+=0.1*sin(this.theta);this.vy+=0.1*cos(this.theta);this.radius*=0.96;this.alive=0.5<this.radius},draw:function(a){a.beginPath();a.arc(this.x,this.y,this.radius,0,TWO_PI);a.fillStyle=this.color;a.fill()}};var MAX_PARTICLES=280,COLOURS="#69D2E7,#A7DBD8,#E0E4CC,#F38630,#FA6900,#FF4E50,#F9D423".split(","),particles=[],pool=[],k=Sketch.create({container:document.getElementById("container")});k.setup=function(){var a,b,c;for(a=0;20>a;a++)b=0.5*k.width+random(-100,100),c=0.5*k.height+random(-100,100),k.spawn(b,c)};k.spawn=function(a,b){particles.length>=MAX_PARTICLES&&pool.push(particles.shift());particle=pool.length?pool.pop():new Particle;particle.init(a,b,random(5,40));particle.wander=random(0.5,2);particle.color=random(COLOURS);particle.drag=random(0.9,0.99);theta=random(TWO_PI);force=random(2,8);particle.vx=sin(theta)*force;particle.vy=cos(theta)*force;particles.push(particle)};k.update=function(){var a,b;for(a=particles.length-1;0<=a;a--)b=particles[a],b.alive?b.move():pool.push(particles.splice(a,1)[0])};k.draw=function(){k.globalCompositeOperation="lighter";for(var a=particles.length-1;0<=a;a--)particles[a].draw(k)};k.mousemove=function(){var a,b,c,d,e;c=0;for(e=k.touches.length;c<e;c++)for(a=k.touches[c],b=random(1,4),d=0;d<b;d++)k.spawn(a.x,a.y)};