var ctx,pixels,w=424,h=240,map=Array(262144),texmap=Array(12288);
function init(){for(var a=1;16>a;a++)for(var c=255-(96*Math.random()|0),d=0;48>d;d++)for(var e=0;16>e;e++){var g=9858122;4==a&&(g=8355711);if(4!=a||0==(3*Math.random()|0))c=255-(96*Math.random()|0);1==a&&d<(e*e*3+81*e>>2&3)+18?g=6990400:1==a&&d<(e*e*3+81*e>>2&3)+19&&(c=2*c/3);if(7==a)if(g=6771249,0<e&&15>e&&(0<d&&15>d||32<d&&47>d)){var g=12359778,b=e-7,c=(d&15)-7;0>b&&(b=1-b);0>c&&(c=1-c);c>b&&(b=c);c=196-(32*Math.random()|0)+b%3*32}else 0==(2*Math.random()|0)&&(c=c*(150-100*(e&1))/100);5==a&&(g=
11876885,0==(e+4*(d>>2))%8||0==d%4)&&(g=12365733);9==a&&(g=4210943);b=c;32<=d&&(b/=2);8==a&&(g=5298487,0==(2*Math.random()|0)&&(g=0,b=255));texmap[e+16*d+768*a]=(g>>16&255)*b/255<<16|(g>>8&255)*b/255<<8|(g&255)*b/255}ctx=document.getElementById("t").getContext("2d");for(e=0;64>e;e++)for(d=0;64>d;d++)for(g=0;64>g;g++)a=g<<12|d<<6|e,c=0.4*(d-32.5),b=0.4*(g-32.5),map[a]=16*Math.random()|0,Math.random()>Math.sqrt(Math.sqrt(c*c+b*b))-0.8&&(map[a]=0);pixels=ctx.createImageData(w,h);for(a=0;a<w*h;a++)pixels.data[4*
a+3]=255;setInterval(clock,10)}function clock(){renderMinecraft();ctx.putImageData(pixels,0,0)}var f=0;
function renderMinecraft(){var a=0.4*Math.sin(Date.now()%1E4/1E4*Math.PI*2)+Math.PI/2,c=0.4*Math.cos(Date.now()%1E4/1E4*Math.PI*2),d=Math.cos(c),c=Math.sin(c),e=Math.cos(a),a=Math.sin(a),g=32.5+Date.now()%1E4/1E4*64;f++;for(var b=0;b<w;b++)for(var B=(b-w/2)/h,q=0;q<h;q++){for(var n=(q-h/2)/h,p=1*d+n*c,v=n*d-1*c,x=B*e+p*a,C=p*e-B*a,p=0,n=255,y=0,D=32,m=0;3>m;m++){var l=x;1==m&&(l=v);2==m&&(l=C);var s=1/(0>l?-l:l),E=x*s,A=v*s,F=C*s,k=g-(g|0);1==m&&(k=0.5);2==m&&(k=0.5);0<l&&(k=1-k);var t=s*k,r=g+E*
k,u=32.5+A*k,k=32.5+F*k;0>l&&(0==m&&r--,1==m&&u--,2==m&&k--);for(;t<D;){l=map[(k&63)<<12|(u&63)<<6|r&63];if(0<l){var G=16*(r+k)&15,z=(16*u&15)+16;1==m&&(G=16*r&15,z=16*k&15,0>A&&(z+=32));l=texmap[G+16*z+768*l];0<l&&(p=l,y=255-(t/32*255|0),n=255*(255-(m+2)%3*50)/255,D=t)}r+=E;u+=A;k+=F;t+=s}}v=(p>>8&255)*n*y/65025;x=(p&255)*n*y/65025;pixels.data[4*(b+q*w)+0]=(p>>16&255)*n*y/65025;pixels.data[4*(b+q*w)+1]=v;pixels.data[4*(b+q*w)+2]=x}}init();